alarm_clock:
  alias: Alarm Clock
  sequence:
    - service: input_boolean.turn_off
      entity_id: input_boolean.sleep_mode
    - service: light.turn_on
      data:
        entity_id: light.tv_backlight
        kelvin: 4500
        brightness: 255
        transition: 60
    - delay: '00:00:30'
    - service: light.turn_on
      data:
        entity_id: light.bedroom_lamp
        kelvin: 4500
        brightness: 255
        transition: 60
    - delay: '00:01:00'
    - service: light.turn_on
      entity_id: light.bedroom_light
    - service: script.morning_tts
    - condition: state
      entity_id: input_boolean.alarm_clock_coffee
      state: 'on'
    - service: switch.turn_on
      entity_id: switch.coffee_maker
morning_tts:
  alias: Morning TTS
  sequence:
    - service: media_player.media_stop
      data:
        entity_id: media_player.volumio_mpd
    - service: media_player.volume_set
      data:
        entity_id: media_player.volumio_volumio_local
        volume_level: 0.22
    - service: tts.google_translate_say
      data_template:
        entity_id: media_player.volumio_mpd
        message: "Good morning! The current time is {{ now().strftime('%H:%M') }}. Today's weather is {{ states('sensor.dark_sky_summary_0d') }} The high will be {{ states('sensor.dark_sky_daytime_high_temperature_0d') }}. Here's the news."
    - wait_template: "{{ not is_state('media_player.volumio_mpd', 'playing') }}"
    - service: media_player.play_media
      data_template:
        entity_id: media_player.volumio_mpd
        media_content_type: music
        media_content_id: "{{ states('sensor.npr_news_scrape') }}"
rain_tts:
  alias: Rain TTS
  sequence:
    - service: media_player.media_stop
      data:
        entity_id: media_player.volumio_mpd
    - service: media_player.volume_set
      data:
        entity_id: media_player.volumio_volumio_local
        volume_level: 0.4
    - service: tts.google_translate_say
      data_template:
        entity_id: media_player.volumio_mpd
        message: "Attention! The windows are open and {{ states('sensor.dark_sky_precip') }} is detected."
